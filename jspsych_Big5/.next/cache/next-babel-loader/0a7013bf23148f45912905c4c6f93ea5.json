{"ast":null,"code":"import _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Component } from 'react';\nimport Page from '../components/Page';\nimport Item from '../components/Item';\nimport Intro from '../components/Intro';\n\nvar _require = require('@alheimsins/b5-johnson-120-ipip-neo-pi-r'),\n    getItems = _require.getItems,\n    getInfo = _require.getInfo;\n\nvar _require2 = require('jcb64'),\n    pack = _require2.pack;\n\nvar Index =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Index, _Component);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props));\n    _this.state = {\n      answers: {},\n      items: false,\n      intro: false,\n      language: 'en'\n    };\n    _this.setLanguage = _this.setLanguage.bind(_assertThisInitialized(_this));\n    _this.startTest = _this.startTest.bind(_assertThisInitialized(_this));\n    _this.setAnswer = _this.setAnswer.bind(_assertThisInitialized(_this));\n    _this.handleDoSubmit = _this.handleDoSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"startTest\",\n    value: function startTest() {\n      var language = this.state.language;\n      var items = getItems(language, true);\n      items.reverse();\n      this.setState({\n        items: items,\n        nowShowing: 0,\n        intro: true\n      });\n    }\n  }, {\n    key: \"setLanguage\",\n    value: function setLanguage(e) {\n      e.preventDefault();\n      var language = e.target.dataset.language;\n      this.setState({\n        language: language\n      });\n    }\n  }, {\n    key: \"setAnswer\",\n    value: function setAnswer(e) {\n      e.preventDefault();\n      var answers = this.state.answers;\n      var nowShowing = this.state.nowShowing;\n\n      var nextShowing = _parseInt(e.target.dataset.num, 10);\n\n      if (nextShowing > nowShowing) {\n        nowShowing = nextShowing;\n      }\n\n      answers[e.target.dataset.qid] = {\n        domain: e.target.dataset.domain,\n        facet: e.target.dataset.facet,\n        score: e.target.dataset.score\n      };\n      this.setState({\n        answers: answers,\n        nowShowing: nowShowing\n      });\n    }\n  }, {\n    key: \"handleDoSubmit\",\n    value: function handleDoSubmit(e) {\n      var answers = this.state.answers;\n      var language = this.state.language;\n\n      var choices = _Object$keys(answers).reduce(function (prev, current) {\n        var choice = answers[current];\n        prev.push({\n          domain: choice.domain,\n          facet: choice.facet,\n          score: choice.score\n        });\n        return prev;\n      }, []);\n\n      var result = {\n        language: language,\n        answers: choices\n      };\n      var b64 = pack(result);\n      window.location = \"/result?id=\".concat(b64);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(Page, null, __jsx(\"h1\", {\n        className: \"jsx-2507319245\"\n      }, \"Big Five Test\"), this.state.intro === false ? __jsx(Intro, {\n        selectedLanguage: this.state.language,\n        info: getInfo(),\n        setLanguage: this.setLanguage,\n        startTest: this.startTest\n      }) : null, this.state.items !== false && this.state.nowShowing === this.state.items.length ? __jsx(\"button\", {\n        onClick: this.handleDoSubmit,\n        className: \"jsx-2507319245\"\n      }, \"Submit\") : null, this.state.items !== false ? this.state.items.map(function (item) {\n        return _parseInt(item.num, 10) <= _this2.state.nowShowing + 1 ? __jsx(Item, {\n          data: item,\n          answers: _this2.state.answers,\n          setAnswer: _this2.setAnswer,\n          key: item.id\n        }) : null;\n      }) : null, __jsx(_JSXStyle, {\n        id: \"2507319245\"\n      }, [\"h2.jsx-2507319245{color:red;font-size:48px;text-align:center;}\", \"a.jsx-2507319245,a.jsx-2507319245:visited{color:white;}\", \"button.jsx-2507319245{background-color:white;border-radius:2px;color:black;padding:15px 32px;text-align:center;-webkit-text-decoration:none;text-decoration:none;display:inline-block;font-size:16px;width:200px;margin:10px;cursor:pointer;}\", \"button.jsx-2507319245:focus{outline:0;}\", \"button.jsx-2507319245:active{outline:0;}\"]));\n    }\n  }]);\n\n  return Index;\n}(Component);\n\nexport { Index as default };","map":null,"metadata":{},"sourceType":"module"}